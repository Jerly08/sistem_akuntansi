<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sistema Akuntansi API - Swagger UI</title>
  <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@5/swagger-ui.css" />
  <style>
    html, body, #swagger {
      height: 100%;
      margin: 0;
      padding: 0;
    }
    
    /* Remove all green elements and quick start banners */
    .swagger-ui .info .title small.version-stamp,
    .swagger-ui .info .title small,
    .swagger-ui .info .description .markdown p:first-child,
    .info .description .renderedMarkdown p:first-child,
    [style*="background-color: #1f8443"],
    [style*="background: #1f8443"],
    [style*="background-color: green"],
    [style*="background: green"],
    [class*="quickstart"],
    [class*="quick-start"],
    .swagger-ui .scheme-container {
      display: none !important;
    }
    
    /* Fix overflow issues in Quick Start and code sections */
    .swagger-ui .renderedMarkdown pre,
    .swagger-ui .renderedMarkdown code,
    .swagger-ui .highlight-code pre,
    .swagger-ui .highlight-code code,
    .swagger-ui pre,
    .swagger-ui code {
      max-width: 100% !important;
      overflow-x: auto !important;
      word-wrap: break-word !important;
      white-space: pre-wrap !important;
    }
    
    /* Ensure any remaining green banners are properly contained */
    .swagger-ui .renderedMarkdown,
    .swagger-ui .info .description {
      max-width: 100% !important;
      overflow: hidden !important;
    }
    
    /* Ensure clean appearance */
    .swagger-ui {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    }
    
    .swagger-ui .topbar {
      background-color: #f8f9fa;
      border-bottom: 1px solid #e9ecef;
    }
    
    /* Improve JSON display */
    .swagger-ui .response-col_status,
    .swagger-ui .response-col_links,
    .swagger-ui .response-col_description {
      white-space: pre-wrap;
      word-break: break-word;
    }
    
    /* Custom authentication styling */
    .swagger-ui .auth-wrapper {
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <div id="swagger"></div>
  <script src="https://unpkg.com/swagger-ui-dist@5/swagger-ui-bundle.js"></script>
  <script>
  window.onload = function() {
    window.ui = SwaggerUIBundle({
      url: '/docs/swagger.json',
      dom_id: '#swagger',
      deepLinking: true,
      showExtensions: true,
      showCommonExtensions: true,
      defaultModelRendering: 'example',
      defaultModelExpandDepth: 2,
      defaultModelsExpandDepth: 2,
      validatorUrl: null,
      presets: [
        SwaggerUIBundle.presets.apis,
        SwaggerUIBundle.presets.standalone
      ],
      layout: "StandaloneLayout",
      requestInterceptor: function(request) {
        // Ensure proper content-type headers
        if (!request.headers['Content-Type'] && (request.method === 'POST' || request.method === 'PUT')) {
          request.headers['Content-Type'] = 'application/json';
        }
        if (!request.headers['Accept']) {
          request.headers['Accept'] = 'application/json';
        }
        
        // Add CORS headers if needed
        request.headers['Access-Control-Allow-Origin'] = '*';
        
        return request;
      },
      responseInterceptor: function(response) {
        // Ensure proper JSON parsing
        if (response.headers['content-type'] && response.headers['content-type'].includes('application/json')) {
          try {
            if (typeof response.text === 'string' && response.text.length > 0) {
              // Validate JSON
              JSON.parse(response.text);
            }
          } catch (e) {
            console.warn('Response is not valid JSON:', response.text);
            // Try to fix common JSON issues
            if (response.text) {
              try {
                response.text = response.text.replace(/([{,]\s*)([a-zA-Z_$][a-zA-Z0-9_$]*)\s*:/g, '$1"$2":');
                JSON.parse(response.text);
              } catch (e2) {
                console.error('Could not fix JSON:', e2);
              }
            }
          }
        }
        return response;
      }
    });
    
    // Remove any remaining green elements after a delay
    setTimeout(function() {
      const elementsToHide = [
        '[style*="background-color: green"]',
        '[style*="background: green"]',
        '[style*="background-color: #1f8443"]',
        '[style*="background: #1f8443"]',
        '[class*="quickstart"]',
        '[class*="quick-start"]',
        '.info .title small',
        '.renderedMarkdown p:first-child',
        '.swagger-ui .info .description .markdown p:first-child'
      ];
      
      elementsToHide.forEach(selector => {
        const elements = document.querySelectorAll(selector);
        elements.forEach(el => {
          el.style.display = 'none';
          el.style.visibility = 'hidden';
          el.style.opacity = '0';
          el.style.height = '0';
          el.style.overflow = 'hidden';
        });
      });
      
      // Also fix any overflow issues in code blocks
      const codeElements = document.querySelectorAll('pre, code, .highlight-code');
      codeElements.forEach(el => {
        el.style.maxWidth = '100%';
        el.style.overflowX = 'auto';
        el.style.whiteSpace = 'pre-wrap';
        el.style.wordWrap = 'break-word';
      });
    }, 2000);
    
    // Additional cleanup after 5 seconds to catch any dynamically added content
    setTimeout(function() {
      const moreElementsToHide = document.querySelectorAll(
        '[style*="green"], .renderedMarkdown p:first-child, .info .description .markdown p:first-child'
      );
      moreElementsToHide.forEach(el => {
        if (el.textContent && el.textContent.toLowerCase().includes('quick')) {
          el.style.display = 'none';
        }
      });
    }, 5000);
  };
  </script>
</body>
</html>