# ================================================================
# DOCKER COMPOSE ENVIRONMENT CONFIGURATION
# Copy this file to .env and adjust values for your environment
# ================================================================
#
# ‚ö†Ô∏è  IMPORTANT: NEXT_PUBLIC_API_URL
# ----------------------------------
# This variable is used at BUILD TIME by Next.js frontend.
# It MUST be the PUBLIC URL that users' browsers will use to reach the backend.
# DO NOT use Docker internal names like "backend:8080" - browsers can't resolve that!
#
# Examples:
#   - VPS: http://YOUR_VPS_IP:8081
#   - Domain: https://api.yourdomain.com
#   - Local: http://localhost:8081
#
# ================================================================

# ======================
# Database Configuration
# ======================
DB_USER=postgres
DB_PASSWORD=your_secure_password_here
DB_NAME=sistem_akuntansi
# Use 5433 to avoid conflict with other PostgreSQL instances
DB_PORT=5433

# ======================
# Backend Configuration
# ======================
# Use 8081 to avoid conflict with other services
BACKEND_PORT=8081
ENVIRONMENT=production

# JWT Secrets (CHANGE THESE IN PRODUCTION!)
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters
JWT_ACCESS_SECRET=your-access-secret-key-minimum-32-characters
JWT_REFRESH_SECRET=your-refresh-secret-key-minimum-32-characters

# Balance & Payment Settings
SKIP_BALANCE_RESET=false
ENABLE_LEGACY_PAYMENT_JOURNALS=true
ENABLE_SSOT_PAYMENT_JOURNALS=true

# ======================
# Frontend Configuration
# ======================
# Use 3001 to avoid conflict with other services
FRONTEND_PORT=3001
NODE_ENV=production

# ‚ö†Ô∏è  CRITICAL: This URL is embedded at BUILD TIME!
# Must be the PUBLIC URL accessible from user's browser
# Example for VPS: http://72.62.245.66:8081
NEXT_PUBLIC_API_URL=http://YOUR_VPS_IP:8081

# ======================
# CORS Configuration
# ======================
# Comma-separated list of allowed origins
# Must include your frontend URL
ALLOWED_ORIGINS=http://YOUR_VPS_IP:3001,http://YOUR_VPS_IP:8081

# ================================================================
# DEPLOYMENT EXAMPLES FOR VPS 72.62.245.66
# ================================================================

# üöÄ YOUR VPS CONFIGURATION (copy this to .env)
# ---------------------------------------------
# DB_USER=postgres
# DB_PASSWORD=AkuntansiSecure2025!
# DB_NAME=sistem_akuntansi
# DB_PORT=5433
# BACKEND_PORT=8081
# ENVIRONMENT=production
# JWT_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6
# JWT_ACCESS_SECRET=x9y8z7w6v5u4t3s2r1q0p9o8n7m6l5k4j3i2h1g0f9e8d7c6b5a4
# JWT_REFRESH_SECRET=m1n2o3p4q5r6s7t8u9v0w1x2y3z4a5b6c7d8e9f0g1h2i3j4k5l6
# SKIP_BALANCE_RESET=false
# ENABLE_LEGACY_PAYMENT_JOURNALS=true
# ENABLE_SSOT_PAYMENT_JOURNALS=true
# FRONTEND_PORT=3001
# NODE_ENV=production
# NEXT_PUBLIC_API_URL=http://72.62.245.66:8081
# ALLOWED_ORIGINS=http://72.62.245.66:3001,http://72.62.245.66:8081

# ================================================================
# SECURITY NOTES
# ================================================================
# 
# 1. NEVER commit .env files to version control
# 2. Use strong, unique passwords (minimum 16 characters)
# 3. Generate random JWT secrets using: openssl rand -hex 32
# 4. In production, use HTTPS with a reverse proxy (nginx/traefik)
# 5. Regularly rotate JWT secrets
# 6. Keep backup of .env files securely
#
# ================================================================
